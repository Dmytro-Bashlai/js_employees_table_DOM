{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nlet titleHeaderText = '';\n\ntable.insertAdjacentHTML(\n  'afterend',\n  `\n  <form\n    class=\"new-employee-form\"\n    novalidate\n  >\n    <label>\n      Name:\n      <input\n        data-qa=\"name\"\n        name=\"name\"\n        type=\"text\"\n        required\n      />\n    </label>\n    <label>\n      Position:\n      <input\n        data-qa=\"position\"\n        name=\"position\"\n        type=\"text\"\n        required\n      />\n    </label>\n    <label>\n      Office:\n      <select data-qa=\"office\">\n        <option selected>Tokyo</option>\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input\n        data-qa=\"age\"\n        name=\"age\"\n        type=\"number\"\n        required\n      />\n    </label>\n    <label>\n      Salary:\n      <input\n        data-qa=\"salary\"\n        name=\"salary\"\n        type=\"number\"\n        required\n      />\n    </label>\n    <button type=\"submit\">Save to table</button>\n  </form>\n  `,\n);\n\nconst form = document.querySelector('.new-employee-form');\n\ntable.addEventListener('click', function (e) {\n  const headerCell = e.target.closest('thead th');\n\n  if (!headerCell) {\n    return;\n  }\n\n  if (headerCell.textContent !== titleHeaderText) {\n    getSortedTable(headerCell, 'ascDirection');\n    titleHeaderText = headerCell.textContent;\n  } else {\n    getSortedTable(headerCell, 'descDirection');\n    titleHeaderText = '';\n  }\n});\n\ntable.addEventListener('click', function (e) {\n  const chosenRow = e.target.closest('tbody tr');\n  const tbodyRows = [...table.querySelector('tbody').rows];\n\n  if (chosenRow && !chosenRow.classList.contains('active')) {\n    tbodyRows.forEach((row) => row.removeAttribute('class'));\n    chosenRow.setAttribute('class', 'active');\n  }\n});\n\ntable.addEventListener('dblclick', function (e) {\n  const chosenCell = e.target.closest('tbody td');\n\n  if (chosenCell) {\n    const editInput = document.createElement('input');\n    const cellTextDefault = chosenCell.textContent;\n\n    chosenCell.innerHTML = '';\n    editInput.classList.add('cell-input');\n    chosenCell.append(editInput);\n    editInput.value = cellTextDefault;\n    editInput.focus();\n\n    const handleBlur = function () {\n      saveChanges(chosenCell, cellTextDefault);\n    };\n\n    editInput.addEventListener('keydown', (ev) => {\n      if (ev.key === 'Enter') {\n        editInput.removeEventListener('blur', handleBlur);\n        saveChanges(chosenCell, cellTextDefault);\n      }\n    });\n\n    editInput.addEventListener('blur', handleBlur);\n  }\n});\n\nform.addEventListener('submit', function (e) {\n  e.preventDefault();\n\n  const newRow = document.createElement('tr');\n  const inputName = form.querySelector('input[name=\"name\"]').value.trim();\n  const inputAge = form.querySelector('input[name=\"age\"]').value.trim();\n  const inputSalary = form.querySelector('input[name=\"salary\"]').value.trim();\n  const inputPosition = form\n    .querySelector('input[name=\"position\"]')\n    .value.trim();\n\n  if (!inputPosition || !inputName || !inputAge || !inputSalary) {\n    return pushNotification(\n      'All fields must be filled',\n      'Please fill in all fields',\n      'error',\n    );\n  }\n\n  if (inputName.length < 4) {\n    return pushNotification(\n      'The name is to short',\n      'The name must contain at least 4 characters',\n      'error',\n    );\n  }\n\n  if (+inputAge < 18 || +inputAge > 90) {\n    return pushNotification(\n      'Incorrect age entry',\n      'The age must be between 18 and 90',\n      'error',\n    );\n  }\n\n  for (const field of form.children) {\n    if (field.matches('label')) {\n      const normalizedfieldName = field.firstChild.data\n        .toLowerCase()\n        .replace(/[^a-z]/g, '');\n      const fieldValue = field.lastElementChild.value;\n\n      addEmployee(normalizedfieldName, fieldValue, newRow);\n    }\n\n    if (field.lastElementChild && field.lastElementChild.matches('input')) {\n      field.lastElementChild.value = '';\n    }\n  }\n\n  return pushNotification(\n    'Emploee added successfully',\n    'The Emploee has been added to the table.',\n    'success',\n  );\n});\n\nfunction getSortedTable(pressedButton, direction) {\n  const { cellIndex, textContent } = pressedButton;\n  const tbodyRows = [...table.querySelector('tbody').rows];\n\n  tbodyRows.sort((rowA, rowB) => {\n    const cellA = rowA.cells[cellIndex].textContent;\n    const cellB = rowB.cells[cellIndex].textContent;\n    const regExp = /[^0-9]/g;\n\n    if (['Name', 'Position', 'Office'].includes(textContent)) {\n      return direction === 'ascDirection'\n        ? cellA.localeCompare(cellB)\n        : cellB.localeCompare(cellA);\n    }\n\n    if (['Salary', 'Age'].includes(textContent)) {\n      return direction === 'ascDirection'\n        ? +cellA.replace(regExp, '') - +cellB.replace(regExp, '')\n        : +cellB.replace(regExp, '') - +cellA.replace(regExp, '');\n    }\n  });\n\n  const tableBody = table.querySelector('tbody');\n\n  tableBody.innerHTML = '';\n  tbodyRows.forEach((row) => tableBody.appendChild(row));\n}\n\nfunction saveChanges(cell, textDefault) {\n  const input = cell.querySelector('.cell-input');\n\n  if (input) {\n    const newText = input.value.trim();\n\n    cell.textContent = newText !== '' ? newText : textDefault;\n    input.remove();\n  }\n}\n\nfunction addEmployee(inputName, inputValue, row) {\n  const tableBody = table.querySelector('tbody');\n  const headCells = table.querySelectorAll('thead th');\n\n  for (const headCell of headCells) {\n    const normalizedHeadCell = headCell.textContent.toLowerCase();\n\n    if (normalizedHeadCell === inputName) {\n      const checkedInputValue =\n        inputName === 'salary' ? formatSalary(inputValue) : inputValue;\n\n      row.insertAdjacentHTML('beforeend', `<td>${checkedInputValue}</td>`);\n    }\n  }\n\n  tableBody.insertAdjacentElement('afterbegin', row);\n}\n\nfunction formatSalary(salary) {\n  const sanitizedInput = salary.replace(/\\D/g, '');\n  const formattedInput = sanitizedInput.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\n  return `$${formattedInput}`;\n}\n\nfunction pushNotification(title, description, type) {\n  const message = document.createElement('div');\n\n  message.classList.add('notification', type);\n  message.setAttribute('data-qa', 'notification');\n\n  message.insertAdjacentHTML(\n    'beforeend',\n    `\n    <h2 class=\"title\" style=\"font-size: inherit;\">${title}</h2>\n    <p>${description}</p>\n    `,\n  );\n\n  document.body.insertAdjacentElement('beforeend', message);\n\n  setTimeout(() => {\n    message.remove();\n  }, 5000);\n}\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}